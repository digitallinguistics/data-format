{
  "$schema": "http://json-schema.org/schema#",
  "id": "http://digitallinguistics.org/schemas/text-0.1.0.json#",

  "title": "Text",
  "type": "object",

  "description": "The Text is the fundamental unit of documentation. It represents a linguistic performance of a stretch of discourse in context. This may include a wide variety of linguistic genres: an elicitation session, a conversation, a narrative, a song, etc.",

  "required": [
    "phrases",
    "title"
  ],

  "additionalProperties": true,

  "properties": {

    "title": {
      "title": "Title",
      "type": "object",
      "description": "A title is a human-readable prose description of the content of the text. The `title` object contains all the titles of the text, in one or more orthographies. Each attribute in the `title` object should be the abbreviation of an orthography, and its value should be the title of the text, in that orthography.",
      "minProperties": 1,
      "patternProperties": {
        "^[(a-z)|(A-Z)|(0-9)]+$": {
          "title": "Transcription",
          "type": "string",
          "description": "A transcription of the title, in the orthography specified by the field's attribute name.",
          "minLength": 1,
          "default": ""
        }
      }
    },

    "phrases": {
      "title": "Phrases",
      "type": "array",
      "description": "A collection of all the phrases contained in this text. The DLx specification imposes no requirements regarding how the linguist should segment the text into phrases. The linguist may decide to segment their text based on intonation units, turns, sentences, or any other appropriate linguistic subdivision. The order of phrases in the collection must reflect their actual order in the text. Phrases do *not* have to be unique - a phrase may be repeated in a text, for example.,",
      "default": [],
      "items": { "$ref": "http://digitallinguistics.org/schemas/phrase#" },
      "minItems": 1
    },

    "abbrev": {
      "title": "Abbreviation",
      "$ref": "#/definitions/abbrev",
      "description": "A human-readable abbreviation for this text, containing only letters `a-z`, `A-Z`, and numbers `0-9` (no spaces allowed)."
    },

    "url": {
      "title": "URL",
      "type": "string",
      "format": "uri",
      "description": "An absolute URL where this text can be retrieved from. The URL does not have to be publicly accessible."
    },

    "contributors": {
      "title": "Contributors",
      "type": "array",
      "description": "A collection of people who contributed to the creation or analysis of this text in some way.",
      "default": [],
      "items": {
        "title": "Contributor",
        "type": "object",
        "description": "A contributor is any person who contributed to the creation or analysis of this text, including speakers, linguists, transcribers, recorders, etc.",
        "required": [
          "name",
          "role"
        ],
        "additionalProperties": true,
        "properties": {
          "name": {
            "title": "Name",
            "type": "string",
            "description": "The name of this person. If the person is using a pseudonym in your data, you should use that pseudonym in this field.",
            "minLength": 1
          },
          "role": {
            "title": "Role",
            "type": "string",
            "description": "The role that this person played in this text, e.g. `speaker` or `recorder`.",
            "minLength": 1
          },
          "abbreviation": {
            "title": "Abbreviation",
            "description": "An abbreviation for this person.",
            "$ref": "#/definitions/abbrev"
          },
          "person": {
            "title": "Person",
            "description": "A DLx person object containing more detailed information about this person.",
            "$ref": "http://digitallinguistics.org/schemas/person#"
          }
        },
        "default": {}
      }
    },

    "access": {
      "title": "Access Rights",
      "$ref": "http://digitallinguistics.org/schemas/access#"
    },

    "discourseType": {
      "title": "Discourse Type",
      "type": "string",
      "description": "The type of discourse event, e.g. monologue, dialogue, or song.",
      "minLength": 1
    },

    "genre": {
      "title": "Genre",
      "type": "string",
      "description": "The genre of the text, e.g. folktale, personal narrative, or expository.",
      "minLength": 1
    },

    "location": {
      "title": "Location",
      "$ref": "http://digitallinguistics.org/schemas/location#"
    },

    "notes": {
      "title": "Notes",
      "$ref": "http://digitallinguistics.org/schemas/notes#",
      "default": {}
    },

    "dateCreated": {
      "title": "Date Created",
      "type": "string",
      "format": "date-time",
      "description": "The date (and optionally time) that this text object was created, in [internet date-time format](http://tools.ietf.org/html/rfc3339). This should **not** be used for the date the text was recorded (see the `dateRecorded` property instead). Applications should supply today's date as the default if the `dateCreated` field is empty.",
      "default": "(today's date)"
    },

    "dateModified": {
      "title": "Date Modified",
      "type": "string",
      "format": "date-time",
      "description": "The date (and optionally time) that this text was last updated, in [internet date-time format](http://tools.ietf.org/html/rfc3339)."
    },

    "dateRecorded": {
      "title": "Date Recorded",
      "type": "string",
      "format": "date-time",
      "description": "The date (and optionally time) that this text was recorded, in [internet date-time format](http://tools.ietf.org/html/rfc3339)."
    },

    "media": {
      "title": "Media",
      "type": "array",
      "description": "An array of objects containing information about the media files associated with this text. Usually this will include the WAV or video file that was originally recorded for the text, but can also include any derivative media files (such as MP3) as well. Media associated with a text are automatically considered to be part of the same database bundle as the text.",
      "default": [],
      "items": { "$ref": "http://digitallinguistics.org/schemas/media#" }
    },

    "tags": {
      "title": "Tags",
      "$ref": "http://digitallinguistics.org/schemas/tags#",
      "default": {}
    }

  },

  "definitions": {
    "abbrev": {
      "title": "Abbreviation",
      "type": "string",
      "description": "A human-readable abbreviation, containing on letters `a-z`, `A-Z`, and numbers `0-9` (no spaces allowed).",
      "pattern": "^[(a-z)|(A-Z)|(0-9)]+$"
    }
  }

}
