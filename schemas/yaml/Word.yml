$schema: 'http://json-schema.org/schema'
id:      'http://cdn.digitallinguistics.io/schemas/Word-2.4.0.json'
title:   Word
type:    object

description: 'A Word object represents a specific token in a text, rather than an abstract lexeme (see the Lexeme object for that).'

additionalProperties: true

required:
  - morphemes
  - transcription

properties:

  type:
    title: Type
    type:  string
    description: 'The type of object. Must be set to `Word`.'
    enum:
      - Word

  gloss:
    title: Gloss
    type:  object
    $ref:  'http://cdn.digitallinguistics.io/schemas/MultiLangString.json'
    description: 'A Leipzig-style gloss for this Word. This does not need to be supplied if it can be generated automatically from the glosses at the morpheme level. May be in multiple languages.'

  key:
    title:   Key
    type:    string
    pattern: '^[(a-z)|(A-Z)|(0-9)]+\.[0-9]{1,3}\.[0-9]{1,2}$'
    description: 'A key that uniquely identifies this word token within the Text. The key for a Word consists of the abbreviation of the text, a period, the number of Sentence within the text, another period, and then the number of this word within the Sentence (indexing starts at 1). For example, for the fourth word of the third Sentence of a text with the abbreviation `A`, the key would be `A.3.4`. Keys should be unique within a corpus.'

  morphemes:
    title:       'Morphemes / Components'
    type:        array
    uniqueItems: false
    description: 'A collection of the components (morphemes, lexicon items) in this Word. Components may be repeated if the same morpheme appears twice in the Word.'
    items:
      title: Morpheme
      type:  object
      $ref: 'http://cdn.digitallinguistics.io/schemas/Morpheme.json'
      description: 'An object representing this morphem'

  notes:
    title:       Notes
    type:        array
    uniqueItems: true
    description: 'A collection of notes about this token'
    items:
      title: Note
      type:  object
      $ref: 'http://cdn.digitallinguistics.io/schemas/Note.json'
      description: 'A Note about this token'

  phonemes:

    title:       Phonemes
    type:        array
    uniqueItems: false

    description: 'An array of the phones (phoneme tokens) in this word, in IPA. Each phone should appear in order, and does not have to be unique.'

    items:

      title: 'Phone (Phoneme Token)'
      type:  object

      description: 'An IPA representation of this phoneme. The `phoneme` field is required, but the `allophone` field is optional, for use only when you need to specify that this phoneme is being realized as a particular phoneme. Both `phoneme` and `allophone` must be in IPA rather than a practical orthography.'

      required:
        - phoneme

      additionalProperties: true

      properties:

        allophone:
          title: Allophone
          type:  string
          description: 'This property may be used to specify which allophone this particular phoneme token is. Must be written in IPA.'

        notes:
          title:       Notes
          type:        array
          uniqueItems: true
          description: 'A collection of notes about this phone'
          items:
            title: Note
            type:  object
            $ref: 'http://cdn.digitallinguistics.io/schemas/Note.json'
            description: 'A note about this phone. Useful for one-time observations of interesting allophonic variation in the data.'

        phoneme:
          title: Phoneme
          type:  string
          description: 'An IPA representation of this phoneme token. Must be a representation of the abstract phoneme rather than the particular allophone (use the `allophone` property for that insetad).'

        tags:
          title: Tags
          type:  object
          $ref:  'http://cdn.digitallinguistics.io/schemas/Tags.json'
          description: 'A set of tags for this phone'

  tags:
    title: Tags
    type:  object
    $ref:  'http://cdn.digitallinguistics.io/schemas/Tags.json'
    description: 'A set of tags for this word token'

  transcription:
    title: Transcription
    type:  object
    $ref:  'http://cdn.digitallinguistics.io/schemas/Transcription.json'
    description: 'A transcription of this word token, optionally in multiple orthographies'

  translation:
    title: Translation
    type:  object
    $ref:  'http://cdn.digitallinguistics.io/schemas/Translation.json'
    description: 'A translation of this word, optionally in multiple languages. Note that the translation is not the same as a gloss. Use the translation field for literal or free, natural language translations of a word; use the gloss field for Leipzig-style glosses only.'

  url:
    title: URL
    type:  string
    $ref:  'http://cdn.digitallinguistics.io/schemas/URL.json'
    description: 'A URL where this word may be accessed'
