$schema: http://json-schema.org/draft-07/schema
$id:     https://schemas.digitallinguistics.io/Note.json
title:   Note
type:    object

description: 'A note about this resource. Notes may also include `type` and `language` attributes.'

required:
  - text

properties:

  citation:
    title:       Citation
    $ref:        https://resource.citationstyles.org/schema/latest/input/json/csl-citation.json#/citationItems/items
    description: 'A citation for this note.'

  dateCreated:
    title:       Date Created
    type:        string
    description: 'The date and optionally time that this note was created.'
    oneOf:
      - format: date
      - format: date-time

  dateModified:
    title:       Date Modified
    type:        string
    description: 'The date and optionally time that this note was last modified.'
    oneOf:
      - format: date
      - format: date-time

  language:
    title:       Note Language
    $ref:        https://schemas.digitallinguistics.io/LanguageTag.json
    description: 'The language that the note is written in, as an IETF language tag.'
    # This regex comes from the following sources:
    # - https://github.com/sebinsua/ietf-language-tag-regex
    # - https://stackoverflow.com/questions/7035825/regular-expression-for-a-language-tag-as-defined-by-bcp47/7036171#7036171
    pattern: '^(((en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang))|((([A-Za-z]{2,3}(-([A-Za-z]{3}(-[A-Za-z]{3}){0,2}))?)|[A-Za-z]{4}|[A-Za-z]{5,8})(-([A-Za-z]{4}))?(-([A-Za-z]{2}|[0-9]{3}))?(-([A-Za-z0-9]{5,8}|[0-9][A-Za-z0-9]{3}))*(-([0-9A-WY-Za-wy-z](-[A-Za-z0-9]{2,8})+))*(-(x(-[A-Za-z0-9]{1,8})+))?)|(x(-[A-Za-z0-9]{1,8})+))$'

  source:
    title:       'Source (Database Reference: Person)'
    $ref:        https://schemas.digitallinguistics.io/DatabaseReference.json
    description: 'The person who is the source of the information in this note. This is not necessarily the person who wrote it. For example, a linguist could make a note based on something that a speaker reports, in which case the speaker should be listed as the source.'

  tags:
    title:       Tags
    $ref:        https://schemas.digitallinguistics.io/Tags.json
    description: 'A set of tags that apply to this Note. Useful for tagging notes that need review or responses, or marking a note as resolved.'

  text:
    title:       Note Text
    type:        string
    description: 'The text of the note itself.'

  type:
    title:       Type
    type:        string
    const:       Note
    readOnly:    true
    description: 'The type of object. Must be set to `Note`.'

examples:

  - dateCreated:  '2018-10-31T18:00:09.433Z'
    dateModified: '2018-10-31T18:00:23.691Z'
    language:     swa
    text:         Msemaji huyu ni Janet Kerubo Momanyi.
    source:
      abbreviation: DWH

  - dateCreated:  '2018-10-31T18:00:09.433Z'
    dateModified: '2018-10-31T18:00:23.691Z'
    language:     eng
    text:         Box turtles are known for eating strawberries.
    type:         Note
    source:
      familyName: Swadesh
      givenName:  Morris
